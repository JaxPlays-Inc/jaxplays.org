{{ $title := .Title }}
{{ $url := printf "%s" .Permalink | absLangURL }}

{{ $utm_params := dict "facebook" "?utm_source=facebook&utm_medium=social&utm_campaign=share_btn" "twitter" "?utm_source=twitter&utm_medium=social&utm_campaign=share_btn" "linkedin" "?utm_source=linkedin&utm_medium=social&utm_campaign=share_btn" }}

{{ $facebook_href := printf "https://www.facebook.com/sharer.php?u=%s%s" $url (index $utm_params "facebook") }}
{{ $twitter_href := printf "https://twitter.com/share?url=%s%s&text=%s" $url (index $utm_params "twitter") $title }}
{{ with site.Social.twitter }}
  {{ $twitter_href = printf "%s&via=%s" $twitter_href . }}
{{ end }}
{{ $linkedin_href := printf "https://www.linkedin.com/shareArticle?mini=true&url=%s%s&title=%s" $url (index $utm_params "linkedin") $title }}
{{ $hrefs := dict "facebook" $facebook_href "twitter" $twitter_href "linkedin" $linkedin_href }}

{{ $services := where (partialCached "func/socials/Get" "socials/Get") "share" true }}
{{ if not ($.Param "disable_share") }}
  <div id="sharing" class="mt3 ananke-socials">
    {{ range $service := $services }}
      {{ $href := index $hrefs .name }}
      <a target="_blank" href="{{ $href }}" class="ananke-social-link {{ .name }} no-underline" aria-label="share on {{ .label }}">
        {{ with .icon }}
        <span class="icon"> {{ . }}</span>
        {{ end }}
      </a>
    {{ end }}
  </div>
{{ end }}
